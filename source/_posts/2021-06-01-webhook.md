---
layout: post
title:  "Webhook"
date:   2021-06-01 00:0054 +0900
categories: java
---

## Hooking

특정 상황에 이벤트가 발생하도록 구현해두고, 이를 클라이언트 측에서 컨트롤 할 수 있도록 하는 것.

## Webhook

웹훅은 새 이벤트가 서버에서 발생한 겨우 서버 측 응용 프로그램이 클라이언트 측 응용 프로그램에 알릴 수 있는 메커니즘을 제공합니다.

역방향 API 라고도 불립니다. 일반적인 API는 클라이언트가 서버를 호출하는 구조이지만. 반면 웹훅의 경우 웹훅을 호출하는 서버 측에 등록하면 서버에서 특정 이벤트가 발생했을 때 클라이언트를 호출합니다.

데이터를 지속 폴링하는 방법보다 서버측에서 이벤트가 발생했을 때 이를 듣고 있는 리스너가 있고 이를 콜백으로 내려주기 때문에 성능적으로 좀더 낫다. 계속 보는게 아니고 다 끝나면 알려주는 구조.

특정 API 와 연계되는 다른 API를 하나 만드는 것으로 단순히 이해할 수 있지만.
여기서 Webhook API 의 핵심은. 클라이언트의 URL 그리고 추가적인 정보들을 Client 에서 컨트롤 할 수 있도록 하는 것이다.

즉 이 WebHook API에 설정된 정보들은 클라이언트 기준으로 생성되고, API 호출 이후 완료되는 시점에 이 클라이언트가 설정해둔 정보들로 콜백시킬 수 있다.

polling 방식이 아니고 이벤트를 던지는 거기때문에 성능 상으로도 더 유리하다.

## Git hook

.git/hooks 폴더 안에 git 애서 제공하는 hooking 스크립트들이 있음. 몇개 없다.

각 스크립트는 특정 상황에 따라 맞추어서 동작한다. 예를 들면 푸시하기 이전, 커밋하고 난 이후 이런 식.

폴더안에 .sample 확장자로 되어있는데. 이 확장자를 지워주면 바로 동작이 된다.

즉 아래와 같은 경로에 동일한 이름을 가진 파일이 있으면 자동으로 git이 hooking 하여서 스크립트들을 수행해준다.

```
vi SOME_GIT_REPOSITORY/.git/hooks/pre-commit
```